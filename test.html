<!DOCTYPE html>
<html>
<style>
    .center {
        position: relative;
        margin: 0px 0px 0px 0px;
        align-self: center;
    }

    .block {
        width: 100vw;
        height: 200px;
    }
</style>

<body style="display: flex; flex-direction: column; margin-top: 100px;">

    <button id="popup-button" class="center" style="width: 100px; height: 50px;">Test</button>
    <br>
    <a href="aaa://articleId=pN1UmG_Cyu0" class="center"> Test HRef </a>

    <div class="block" style="background-color: mediumseagreen;"></div>
    <div class="block" style="background-color:bisque;"></div>
    <div class="block" style="background-color:mediumseagreen;"></div>
    <div class="block" style="background-color: bisque;"></div>
    <div class="block" style="background-color:mediumseagreen;"></div>


    <a href="aaa://articleId=pN1UmG_Cyu0" id="end_tag" class="center"> END </a>

    <script>
        const btnTest = document.getElementById("popup-button");

        btnTest.addEventListener("click", function () {
            overlay.style.display = "block";
            popup.style.display = "block";
            close.style.display = "block";
        });


        var scrollInterval;

        var observer = new IntersectionObserver(function (entries) {
            if (entries[0].isIntersecting === true) {
                console.log('END_TAG is fully visible in screen');
                if(scrollInterval) {
                    clearInterval(scrollInterval);
                    scrollInterval = null;
                }
            }
        }, { threshold: [1] });

        var endTag = document.querySelector("#end_tag")
        observer.observe(endTag);

        window.addEventListener("load", (event) => {
            console.log("page is fully loaded");
            scrollInterval = setInterval(function () {
                document.documentElement.scrollTop += 10;
                console.log(endTag.getBoundingClientRect());
            }, 50);
        });
    </script>
</body>

</html>